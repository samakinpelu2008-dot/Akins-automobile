<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DEBLUG – Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body{background:#0d1117;color:white;font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;}
.container{width:100%;max-width:400px;padding:20px;background:#161b22;border-radius:8px;}
h2{text-align:center;margin-bottom:20px;}
input{width:100%;padding:12px;margin-bottom:10px;border-radius:5px;border:none;outline:none;}
button{width:100%;padding:12px;background:#238636;color:white;border:none;border-radius:5px;cursor:pointer;}
button:hover{opacity:0.9;}
.forgot{text-align:right;margin-top:5px;font-size:14px;color:#58a6ff;cursor:pointer;}
.forgot:hover{text-decoration:underline;}
.error{color:#ff7b72;margin-top:10px;font-size:14px;text-align:center;}
.success{color:#3fb950;margin-top:10px;font-size:14px;text-align:center;}
.signup{text-align:center;margin-top:15px;font-size:14px;}
.signup a{color:#58a6ff;text-decoration:none;}
</style>
</head>
<body>

<div class="container">
  <h2>Login to DEBLUG</h2>

  <input type="email" id="email" placeholder="Email" />
  <input type="password" id="password" placeholder="Password" />

  <button id="loginBtn">Login</button>

  <div class="forgot" id="forgotPassword">Forgot password?</div>

  <div class="error" id="errorMsg"></div>
  <div class="success" id="successMsg"></div>

  <div class="signup">
    Don’t have an account?
    <a href="index.html">Sign up</a>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDCBD2gVIg9v-KqYaMFZeu_grgs3yKYfPs",
  authDomain: "fir-chat-f8d55.firebaseapp.com",
  projectId: "fir-chat-f8d55",
  storageBucket: "fir-chat-f8d55.firebasestorage.app",
  messagingSenderId: "792896094694",
  appId: "1:792896094694:web:dd373e5d7d2fc9ae1d5627"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginBtn = document.getElementById("loginBtn");
const forgotBtn = document.getElementById("forgotPassword");
const errorMsg = document.getElementById("errorMsg");
const successMsg = document.getElementById("successMsg");

loginBtn.addEventListener("click", () => {
  errorMsg.textContent = "";
  successMsg.textContent = "";

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!email || !password) { errorMsg.textContent = "Please fill in all fields"; return; }

  signInWithEmailAndPassword(auth,email,password)
    .then(() => { window.location.href="fyp.html"; })
    .catch(() => { errorMsg.textContent="Invalid email or password"; });
});

forgotBtn.addEventListener("click", () => {
  errorMsg.textContent = "";
  successMsg.textContent = "";

  const email = document.getElementById("email").value.trim();
  if (!email) { errorMsg.textContent="Enter your email to reset password"; return; }

  sendPasswordResetEmail(auth,email)
    .then(()=>{ successMsg.textContent="Password reset link sent. Check email."; })
    .catch(()=>{ errorMsg.textContent="Email not found or password reset not enabled"; });
});
</script>

</body>
</html>
